From b87fe90df9844cf9abb26b332c6fcb65570bf681 Mon Sep 17 00:00:00 2001
From: archana25-ms <v-shettigara@microsoft.com>
Date: Tue, 29 Apr 2025 12:55:15 +0000
Subject: [PATCH] Address CVE-2025-2953
Upstream Patch Reference : https://github.com/pytorch/pytorch/commit/6f327128a99debfb2312ee256523ad6b62f763d6

---
 aten/src/ATen/native/mkldnn/Utils.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/aten/src/ATen/native/mkldnn/Utils.cpp b/aten/src/ATen/native/mkldnn/Utils.cpp
index 400eb916..e240a2d2 100644
--- a/aten/src/ATen/native/mkldnn/Utils.cpp
+++ b/aten/src/ATen/native/mkldnn/Utils.cpp
@@ -19,6 +19,7 @@ std::vector<int64_t> pool_output_sizes(
   output_size[1] = input_size[1];
 
   for (const auto i : c10::irange(2, input_size.size())) {
+    TORCH_CHECK_VALUE(stride[i -2] > 0, "Strides must be positive!");
     output_size[i] = pooling_output_shape_pad_lr<int64_t>(
       input_size[i],
       kernel_size[i - 2],
-- 
2.45.3

