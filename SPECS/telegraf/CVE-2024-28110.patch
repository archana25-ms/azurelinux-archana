From c4882bfe8eee7156c2ee7cd800f7df56e9474b6e Mon Sep 17 00:00:00 2001
From: Zhichun Wan <zhichunwan@microsoft.com>
Date: Wed, 13 Mar 2024 22:02:18 +0000
Subject: [PATCH] patches

---
 .../cloudevents/sdk-go/v2/protocol/http/protocol.go          | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/vendor/github.com/cloudevents/sdk-go/v2/protocol/http/protocol.go b/vendor/github.com/cloudevents/sdk-go/v2/protocol/http/protocol.go
index dba6fd7b..7ee3b8fe 100644
--- a/vendor/github.com/cloudevents/sdk-go/v2/protocol/http/protocol.go
+++ b/vendor/github.com/cloudevents/sdk-go/v2/protocol/http/protocol.go
@@ -102,7 +102,10 @@ func New(opts ...Option) (*Protocol, error) {
 	}
 
 	if p.Client == nil {
-		p.Client = http.DefaultClient
+		// This is how http.DefaultClient is initialized. We do not just use
+		// that because when WithRoundTripper is used, it will change the client's
+		// transport, which would cause that transport to be used process-wide.
+		p.Client = &http.Client{}
 	}
 
 	if p.roundTripper != nil {
-- 
2.25.1
